# Change Log: Version 2.0.1

**Release Date:** 2026-01-09

This is a patch release that fixes build infrastructure issues discovered in version 2.0.0 and ensures the project builds correctly on all platforms.

## Bug Fixes

### Build System
- **Fixed build-all.ps1 script**: Corrected PowerShell path handling to use absolute paths with `$PSScriptRoot` instead of `-C` flag
- **Fixed go.mod location**: Added go.mod and go.sum to project root for new cmd/ structure
- **Fixed VERSION embedding**: Relocated VERSION file to `internal/common/version/VERSION` for correct go:embed pattern

### Code Structure
- **Added missing utilities**: Created `cmd/msgraphtool/utils.go` with helper functions (logDebug, logError, logVerbose, maskSecret, maskGUID, validateMessageID, enrichGraphAPIError, retryWithBackoff, etc.)
- **Fixed imports**: Added missing imports in main.go and config.go
- **Removed unused imports**: Cleaned up unused imports in config.go and validation.go

### Module Structure
- **Root go.mod**: Properly configured module at project root for cmd/ architecture
- **VERSION files**: Synchronized VERSION files across src/, internal/common/version/, and root
- **Build paths**: Updated all build scripts to use correct relative paths

## Technical Details

### Files Modified
- `build-all.ps1`: Updated to use `Push-Location` with absolute paths
- `cmd/msgraphtool/main.go`: Added `flag` import
- `cmd/msgraphtool/config.go`: Fixed version.Get() usage, removed unused imports
- `cmd/msgraphtool/utils.go`: Created with all utility functions
- `internal/common/version/version.go`: Changed embed path to local VERSION file
- `internal/smtp/tls/validation.go`: Removed unused `time` import

### Build Verification
- Both tools build successfully with `build-all.ps1`
- Version embedding works correctly (2.0.1 displayed by both tools)
- File sizes: msgraphgolangtestingtool.exe (9.5 MB), smtptool.exe (5.2 MB)

## Migration Notes

No user-facing changes - this release only fixes internal build infrastructure. Users upgrading from 2.0.0 will see no functional differences.

## For Developers

If you're building from source:
- Run `.\build-all.ps1` from project root
- Or build individually: `cd cmd/msgraphtool && go build -o ../../msgraphgolangtestingtool.exe`
- All three VERSION files must stay synchronized (automated by build scripts)

---

**Full Changelog:** See commit history for detailed implementation of build fixes.
